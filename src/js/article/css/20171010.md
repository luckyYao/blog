## 深入探究弹性布局
经常用flex布局，但是属性总是记不住，今天又把它的属性试了一下，希望可以加深下印象。

### 弹性盒
<img src="http://ovjyf065b.bkt.clouddn.com/css/flex-direction-terms.svg">

认识几个名词：
弹性盒（flex container），弹性元素（flex item)），主轴（main axis）、侧轴（cross axis）、主轴起点（main start）、主轴终点（main end）、侧轴起点（cross start）、侧终点（cross end）、主轴尺寸（main size）、侧轴尺寸（cross size）。

### 弹性布局简介
弹性盒构建一个`flex formatting context（自适应格式化上下文FFC）`，与`block formatting context（块格式化上下文BFC）`类似。

（写到这里，突然觉得心好累😫，刚弄明白一个BFC，又发现还有一个IFC，现在又有一个FFC，听说还有一个GFC，前端coder太不容易了!!!）

FFC与BFC相比共同点：
> -> 都为其内部元素创建独立的布局环境，内外互相不影响，参考[深入探究BFC&IFC](#/article/demo20170923)。

> -> 弹性盒垂直margin值与其儿子节点不重合，但是与其父亲，兄弟节点重合。

FFC与BFC相比不同点：
> -> 不可创建浮动子元素，不可使子元素脱离文档流

> -> `vertical-align`无效

> -> 不可使用`::first-line、::first-letter`伪类，因为弹性盒不提供第一行和第一个字母

> -> Last but not least，FFC内部遵循弹性布局特性，这正是本文重点

### 创建方式
display: flex | inline-flex

分别创建块级弹性盒子和行级弹性盒子

### 弹性盒属性
[->  flex-direction](https://www.w3.org/TR/css-flexbox-1/#propdef-flex-direction)：设置主轴方向，`row | row-reverse | column | column-reverse`，默认值row

[->  flex-wrap](https://www.w3.org/TR/css-flexbox-1/#propdef-flex-wrap)：设置子元素是否折行，`nowrap | wrap | wrap-reverse`，默认值nowrap

[->  flex-flow](https://www.w3.org/TR/css-flexbox-1/#propdef-flex-flow)：flex-direction和flex-wrap的简写，`flex-direction || flex-wrap`，默认值row,nowrap

[->  justify-content](https://www.w3.org/TR/css-flexbox-1/#propdef-justify-content)：设置主轴方向弹性元素剩余空间分配规则，`center、flex-start、flex-end、space-between、space-around、space-evenly、stretch等`，默认值flex-start

[->  align-content](https://www.w3.org/TR/css-flexbox-1/#propdef-align-content)：设置侧轴方向弹性元素剩余空间分配规则，`flex-start | flex-end | center | space-between | space-around | stretch`，默认值stretch

[->  align-items](https://www.w3.org/TR/css-flexbox-1/#propdef-align-items)：设置侧轴方向上弹性元素在当前行剩余空间的分配规则， `flex-start | flex-end | center | baseline | stretch`，默认值stretch

### 弹性元素属性
[->  align-self](https://www.w3.org/TR/css-flexbox-1/#propdef-align-items)：设置当前元素侧轴方向上弹性元素在当前行剩余空间的分配规则，`flex-start | flex-end | center | baseline | stretch`，默认值stretch

[->  flex-grow](https://www.w3.org/TR/css-flexbox-1/#flex-flex-grow-factor)：设置当前元素增长因子，弹性元素默认宽度之和小于弹性盒子宽度时，根据增长因子值按比例扩大弹性元素以充满弹性盒子，`<number>`，默认值0

[->  flex-shrink](www.w3.org/TR/css-flexbox-1/#flex-flex-shrink-factor)：设置当前元素的收缩因子，弹性元素默认宽度之和小于弹性盒子宽度时，根据shrink值按比例收缩以防止溢出，`<number>`，默认值1

[->  flex-basis](https://www.w3.org/TR/css-flexbox-1/#flex-flex-basis)：在flex-grow和flex-shrink起作用之前，设置当前元素在主轴方向上的初始大小，`content | <width>`，默认值auto

[->  flex](https://www.w3.org/TR/css-flexbox-1/#propdef-flex)：组合属性，计算结果覆盖width属性，`none | [->   <‘flex-grow’> <‘flex-shrink’>? || <‘flex-basis’> ]`，默认值0 1 auto

[->  order](https://www.w3.org/TR/css-flexbox-1/#order-property)：设置弹性元素排列顺序，`<integer>`， 默认值0

### 其他
MDN上说flex适合小规模布局，新兴的栅格布局适合大规模布局。我没用过栅格布局，也不了解所谓的大规模布局具体指何物，但flex适合小规模布局这是真的！！！

最近发现一个游戏有助于我们理解并记住flex的属性，链接：http://flexboxfroggy.com/

### 实践
[ONE：间距固定，宽度自适应，两列布局](#/demo/layout)

```
方法一：

<style>
  .wrap{
    display: flex;
    flex-wrap: wrap;
    margin-right: -10px;
  }
  .wrap:after{
    content: '';
    flex: 1;
    margin-right: 10px;
    min-width: 45%;
    max-width: 50%;
  }
  .itemBox{
    flex: 1;
    min-width: 45%;
    max-width: 50%;
    height: 100px;
    margin-right: 10px;
    margin-bottom: 10px;
    background: deepskyblue;
  }
</style>
<div class="wrap">
  <div class="itemBox"></div>
  <div class="itemBox"></div>
  <div class="itemBox"></div>
  <div class="itemBox"></div>
  <div class="itemBox"></div>
</div>

方法二：

<style>
  .wrap{
    display: flex;
    flex-wrap: wrap;
    margin-right: -10px;
  }
  .odd{
    overflow: hidden;
  }
  .odd:last-child{
    margin-left: -10px;
  }
  .itemBox{
    flex: 1;
    min-width: 45%;
    max-width: 50%;
    height: 100px;
    margin-right: 10px;
    margin-bottom: 10px;
    background: deepskyblue;
  }
</style>
<!-- 如果有奇数个子元素，加上odd -->
<div class="wrap odd">
  <div class="itemBox"></div>
  <div class="itemBox"></div>
  <div class="itemBox"></div>
  <div class="itemBox"></div>
  <div class="itemBox"></div>
</div>
```

[TWO：圣杯布局，内容优先渲染，三列高度始终相同](#/demo/layout)
```
<style>
  .wrap{
    display: flex;
  }
  .content{
    flex: 1;
    order: 1;
    background: darkblue;
  }
  .left,.right{
    width: 200px;
    background: deepskyblue;
  }
  .left{
    order: 0;
  }
  .right{
    order: 2;
  }
</style>
<div class="wrap">
  <div class="content">CONTENT</div>
  <div class="left">LEFT</div>
  <div class="right">RIGHT</div>
</div>
```

### 参考
[MDN：CSS 弹性盒子布局](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Flexible_Box_Layout)

[W3C](https://www.w3.org/TR/css-flexbox-1/)

[Flexbox — Fast Track to Layout Nirvana?](https://dev.opera.com/articles/flexbox-basics/)

[Advanced Cross-Browser Flexbox](https://dev.opera.com/articles/advanced-cross-browser-flexbox/)

### CHANGELOG
```
2017-10-10 v1.0
2017-11-27 v2.0   1.添加flex容器及flex元素属性说明
                  2.添加flex两列弹性布局及圣杯布局实践
2017-12-12 v2.1   1.添加flex相关小游戏链接
```